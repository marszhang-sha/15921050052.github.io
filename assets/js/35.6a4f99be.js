(window.webpackJsonp=window.webpackJsonp||[]).push([[35],{394:function(t,s,a){"use strict";a.r(s);var n=a(0),e=Object(n.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{staticClass:"content"},[a("h2",{attrs:{id:"shadow"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shadow","aria-hidden":"true"}},[t._v("#")]),t._v(" Shadow")]),t._v(" "),a("h2",{attrs:{id:"shadow服务用途"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#shadow服务用途","aria-hidden":"true"}},[t._v("#")]),t._v(" Shadow服务用途")]),t._v(" "),a("p",[t._v("设备的影子 是用于存储和检索设备的当前状态信息的 JSON 文档。Device Shadow 服务可以为您连接到 AWS IoT 的每台设备保留一个影子。您可以使用该影子通过 MQTT 或 HTTP 获取和设置设备的状态，无论该设备是否连接到 Internet。每台设备的影子都由相应事物的名称唯一标识。\n"),a("img",{attrs:{src:"/uploads/279677d104aebb87e5c294fd012822ff/image.png",alt:"image"}})]),t._v(" "),a("ul",[a("li",[t._v("设备影子保留每台设备的最后报告状态和期望的未来状态，即便设备处于离线状态。")]),t._v(" "),a("li",[t._v("通过 API 或使用规则引擎，获取设备的最后报告状态或设置期望的未来状态。")]),t._v(" "),a("li",[t._v('应用程序可以设置设备的期望未来状态，而无需说明设备的当前状态。AWS IoT 将比较期望未来状态和最后报告状态之间的差异，并命令设备"弥补差异"。')]),t._v(" "),a("li",[t._v("设备 SDK 能够轻松地同步其状态及其影子，并响应通过影子设置的期望的未来状态。")]),t._v(" "),a("li",[t._v("设备影子免费存储设备状态多达一年。如果至少每年更新一次状态，则设备影子将永久保留状态；否则状态将过期。")])]),t._v(" "),a("h2",{attrs:{id:"影子服务"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#影子服务","aria-hidden":"true"}},[t._v("#")]),t._v(" 影子服务")]),t._v(" "),a("p",[t._v("设备影子服务使用MQTT话题，便于应用和设备之间的通信，下面是相关的MQTT QoS 1话题：")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/update")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/get")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/delete")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/update/accepted")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/update/rejected")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/update/delta")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/get/accepted")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/get/rejected")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/delete/accepted")]),t._v(" "),a("p",[t._v("$aws/things/{thingName}/shadow/delete/rejected")]),t._v(" "),a("p",[t._v("设备SDK（C-SDK、JS-SDK）将影子功能内置在设备中，能够使设备与影子服务之间自动同步状态。")]),t._v(" "),a("h2",{attrs:{id:"控制模型"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#控制模型","aria-hidden":"true"}},[t._v("#")]),t._v(" 控制模型")]),t._v(" "),a("p",[a("img",{attrs:{src:"/uploads/1b53521c576beb953300cb573babb736/image.png",alt:"image"}}),t._v("\n控制灯泡\n"),a("img",{attrs:{src:"/uploads/9a921de9c2d510a251b789aaf60d5416/image.png",alt:"image"}})]),t._v(" "),a("h2",{attrs:{id:"工作原理"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#工作原理","aria-hidden":"true"}},[t._v("#")]),t._v(" 工作原理")]),t._v(" "),a("p",[a("img",{attrs:{src:"/uploads/fa8daac0611b0f4ffe080aed7062ecf8/image.png",alt:"image"}})]),t._v(" "),a("p",[a("img",{attrs:{src:"/uploads/37da2277a08fcca859c153b6834efe42/image.png",alt:"image"}})]),t._v(" "),a("p",[t._v("1.连接着的 Led 灯发送封装在MQTT消息中的 reported 状态 『off』 到 AWS IoT\n2.AWS IoT 通过 led 灯使用的证书来确定它所属的虚拟事物\n3.AWS IoT 将 reported 状态保存在设备影子 JSON 文件中\n4.一条 AWS IoT rule 正监控着 led 的 off 状态，它发送一个消息到某个 SNS topic\n5.某 application 收到 SNS 消息。用户将 led 期望状态（desired state）设置为 on\n6. AWS IoT 收到该消息，它更新设备影子中的 desired state，同时发送包含期望状态的 message 到某些topic。此时，reported 和 desired 状态是 『Out of Sync』的\n7. led 收到 delta 消息，开始根据其中的 desired status 来设置其实际状态\n8. led 将其状态设置为 on，向 MQTT topic 发送新的 reported 状态\n9. AWS IoT 更新设备影子，现在该设备的 reported 和 desired 状态一致了")]),t._v(" "),a("h2",{attrs:{id:"格式"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#格式","aria-hidden":"true"}},[t._v("#")]),t._v(" 格式")]),t._v(" "),a("p",[a("img",{attrs:{src:"/uploads/ba398a3c48b6b7d77d8a2f048735550a/image.png",alt:"image"}})]),t._v(" "),a("h2",{attrs:{id:"关键属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#关键属性","aria-hidden":"true"}},[t._v("#")]),t._v(" 关键属性")]),t._v(" "),a("p",[a("img",{attrs:{src:"/uploads/e2b49474ae7db2783464ea52d205acfd/image.png",alt:"image"}})]),t._v(" "),a("h3",{attrs:{id:"影子文档属性"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#影子文档属性","aria-hidden":"true"}},[t._v("#")]),t._v(" 影子文档属性")]),t._v(" "),a("p",[t._v("设备的影子文档具有以下属性：")]),t._v(" "),a("ul",[a("li",[t._v("state")])]),t._v(" "),a("ul",[a("li",[a("p",[t._v("desired 事物的预期状态。应用程序可以向本文档部分写入数据来更新事物的状态，且无需直接连接到该事物。")])]),t._v(" "),a("li",[a("p",[t._v("reported 事物的报告状态。事物可以向本文档部分写入数据，以报告其新状态。应用程序可以读取本文档部分，以确定事物的状态。")])]),t._v(" "),a("li",[a("p",[t._v("metadata 有关存储在文档 state 部分的数据的信息，其中包括 state 部分中每个属性的时间戳（以 Epoch 时间表示），让您能够确定它们的更新时间。")])]),t._v(" "),a("li",[a("p",[t._v("timestamp 指明 AWS IoT 传输消息的时间。通过在消息中使用时间戳并对 desired 或 reported 部分中的不同属性使用时间戳，事物可以确定已更新项目的存在时间，即使它不具有内部时钟特性。")])]),t._v(" "),a("li",[a("p",[t._v("clientToken 特定于设备的字符串，让您能在 MQTT 环境中将响应与请求关联起来。")])]),t._v(" "),a("li",[a("p",[t._v("version 文档版本。文档每次更新时，此版本号都会递增。用于确保正在更新的文档为最新版本。")])])]),t._v(" "),a("h3",{attrs:{id:"影子文档语法"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#影子文档语法","aria-hidden":"true"}},[t._v("#")]),t._v(" 影子文档语法")]),t._v(" "),a("h4",{attrs:{id:"请求结构"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#请求结构","aria-hidden":"true"}},[t._v("#")]),t._v(" 请求结构")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"state"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"desired"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute1"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" integer2"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute2"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"string2"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            ...\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attributeN"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean2\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"reported"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute1"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" integer1"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute2"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"string1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            ...\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attributeN"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean1\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"clientToken"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"token"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" version\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br")])]),a("h4",{attrs:{id:"响应状态"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#响应状态","aria-hidden":"true"}},[t._v("#")]),t._v(" 响应状态")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"state"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"desired"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute1"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" integer2"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute2"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"string2"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            ...\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attributeN"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean2\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"reported"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute1"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" integer1"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute2"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"string1"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            ...\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attributeN"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" boolean1\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"delta"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute3"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" integerX"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute5"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"stringY"')]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"metadata"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"desired"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute1"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" timestamp\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute2"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" timestamp\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            ...\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attributeN"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" timestamp\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n        "),a("span",{attrs:{class:"token property"}},[t._v('"reported"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute1"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" timestamp\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attribute2"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" timestamp\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n            ...\n            "),a("span",{attrs:{class:"token property"}},[t._v('"attributeN"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n                "),a("span",{attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" timestamp\n            "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n        "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n    "),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" timestamp"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"clientToken"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"token"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"version"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" version\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br"),a("span",{staticClass:"line-number"},[t._v("7")]),a("br"),a("span",{staticClass:"line-number"},[t._v("8")]),a("br"),a("span",{staticClass:"line-number"},[t._v("9")]),a("br"),a("span",{staticClass:"line-number"},[t._v("10")]),a("br"),a("span",{staticClass:"line-number"},[t._v("11")]),a("br"),a("span",{staticClass:"line-number"},[t._v("12")]),a("br"),a("span",{staticClass:"line-number"},[t._v("13")]),a("br"),a("span",{staticClass:"line-number"},[t._v("14")]),a("br"),a("span",{staticClass:"line-number"},[t._v("15")]),a("br"),a("span",{staticClass:"line-number"},[t._v("16")]),a("br"),a("span",{staticClass:"line-number"},[t._v("17")]),a("br"),a("span",{staticClass:"line-number"},[t._v("18")]),a("br"),a("span",{staticClass:"line-number"},[t._v("19")]),a("br"),a("span",{staticClass:"line-number"},[t._v("20")]),a("br"),a("span",{staticClass:"line-number"},[t._v("21")]),a("br"),a("span",{staticClass:"line-number"},[t._v("22")]),a("br"),a("span",{staticClass:"line-number"},[t._v("23")]),a("br"),a("span",{staticClass:"line-number"},[t._v("24")]),a("br"),a("span",{staticClass:"line-number"},[t._v("25")]),a("br"),a("span",{staticClass:"line-number"},[t._v("26")]),a("br"),a("span",{staticClass:"line-number"},[t._v("27")]),a("br"),a("span",{staticClass:"line-number"},[t._v("28")]),a("br"),a("span",{staticClass:"line-number"},[t._v("29")]),a("br"),a("span",{staticClass:"line-number"},[t._v("30")]),a("br"),a("span",{staticClass:"line-number"},[t._v("31")]),a("br"),a("span",{staticClass:"line-number"},[t._v("32")]),a("br"),a("span",{staticClass:"line-number"},[t._v("33")]),a("br"),a("span",{staticClass:"line-number"},[t._v("34")]),a("br"),a("span",{staticClass:"line-number"},[t._v("35")]),a("br"),a("span",{staticClass:"line-number"},[t._v("36")]),a("br"),a("span",{staticClass:"line-number"},[t._v("37")]),a("br"),a("span",{staticClass:"line-number"},[t._v("38")]),a("br"),a("span",{staticClass:"line-number"},[t._v("39")]),a("br"),a("span",{staticClass:"line-number"},[t._v("40")]),a("br"),a("span",{staticClass:"line-number"},[t._v("41")]),a("br"),a("span",{staticClass:"line-number"},[t._v("42")]),a("br"),a("span",{staticClass:"line-number"},[t._v("43")]),a("br"),a("span",{staticClass:"line-number"},[t._v("44")]),a("br"),a("span",{staticClass:"line-number"},[t._v("45")]),a("br"),a("span",{staticClass:"line-number"},[t._v("46")]),a("br"),a("span",{staticClass:"line-number"},[t._v("47")]),a("br"),a("span",{staticClass:"line-number"},[t._v("48")]),a("br"),a("span",{staticClass:"line-number"},[t._v("49")]),a("br")])]),a("h4",{attrs:{id:"错误响应"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#错误响应","aria-hidden":"true"}},[t._v("#")]),t._v(" 错误响应")]),t._v(" "),a("div",{staticClass:"language-json line-numbers-mode"},[a("pre",{pre:!0,attrs:{class:"language-json"}},[a("code",[a("span",{attrs:{class:"token punctuation"}},[t._v("{")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"code"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" error-code"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"message"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"error-message"')]),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"timestamp"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" timestamp"),a("span",{attrs:{class:"token punctuation"}},[t._v(",")]),t._v("\n    "),a("span",{attrs:{class:"token property"}},[t._v('"clientToken"')]),a("span",{attrs:{class:"token operator"}},[t._v(":")]),t._v(" "),a("span",{attrs:{class:"token string"}},[t._v('"token"')]),t._v("\n"),a("span",{attrs:{class:"token punctuation"}},[t._v("}")]),t._v("\n")])]),t._v(" "),a("div",{staticClass:"line-numbers-wrapper"},[a("span",{staticClass:"line-number"},[t._v("1")]),a("br"),a("span",{staticClass:"line-number"},[t._v("2")]),a("br"),a("span",{staticClass:"line-number"},[t._v("3")]),a("br"),a("span",{staticClass:"line-number"},[t._v("4")]),a("br"),a("span",{staticClass:"line-number"},[t._v("5")]),a("br"),a("span",{staticClass:"line-number"},[t._v("6")]),a("br")])]),a("h2",{attrs:{id:"预留主题"}},[a("a",{staticClass:"header-anchor",attrs:{href:"#预留主题","aria-hidden":"true"}},[t._v("#")]),t._v(" 预留主题")]),t._v(" "),a("p",[t._v("aws Iot预留了一些主题，预留的主题以$开头。除非下面列出的主题之外，不支持用于进行发布和订阅。在任何其他以 $ 开头的主题中尝试发布或订阅将导致连接被终止。")]),t._v(" "),a("table",[a("thead",[a("tr",[a("th",[t._v("主题")]),t._v(" "),a("th",[t._v("允许的操作")]),t._v(" "),a("th",[t._v("描述")])])]),t._v(" "),a("tbody",[a("tr",[a("td",[t._v("$aws/events/presence/connected/clientId")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当使用特定客户端 ID 的 MQTT 客户端连接至 AWS IoT 时，AWS IoT 将向此主题发布。有关更多信息，请参阅 连接/断开连接事件。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/events/presence/disconnected/clientId")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当使用特定客户端 ID 的 MQTT 客户端与 AWS IoT 断开连接时，AWS IoT 将向此主题发布。有关更多信息，请参阅 连接/断开连接事件。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/events/subscriptions/subscribed/clientId")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当使用特定客户端 ID 的 MQTT 客户端订阅 MQTT 主题时，AWS IoT 将向此主题发布。有关更多信息，请参阅 订阅/取消订阅事件。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/events/subscriptions/unsubscribed/clientId")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当使用特定客户端 ID 的 MQTT 客户端取消订阅 MQTT 主题时，AWS IoT 将向此主题发布。有关更多信息，请参阅 订阅/取消订阅事件。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/delete")]),t._v(" "),a("td",[t._v("发布/订阅")]),t._v(" "),a("td",[t._v("设备或应用程序向此主题发布消息以删除影子。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#delete-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/delete/accepted")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当一个影子被删除时，Device Shadow 服务将向此主题发送消息。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#delete-accepted-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/delete/rejected")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当删除影子的请求遭拒时，Device Shadow 服务将向此主题发送消息。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#delete-rejected-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/get")]),t._v(" "),a("td",[t._v("发布/订阅")]),t._v(" "),a("td",[t._v("应用程序或事物向此主题发布空消息来获取影子。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/get/accepted")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当获取影子的请求获批时，Device Shadow 服务将向此主题发送消息。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#get-accepted-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/get/rejected")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当获取影子的请求遭拒时，Device Shadow 服务将向此主题发送消息。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#get-rejected-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/update")]),t._v(" "),a("td",[t._v("发布/订阅")]),t._v(" "),a("td",[t._v("事物或应用程序向此主题发布消息以更新影子。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#update-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/update/accepted")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当影子更新成功时，Device Shadow 服务将向此主题发送消息。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#update-accepted-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/update/rejected")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当影子更新遭拒时，Device Shadow 服务将向此主题发送消息。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#update-rejected-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/update/delta")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("当检测到影子的“reported”部分与“desired”部分之间存在差异时，Device Shadow 服务将向此主题发送消息。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#update-delta-pub-sub-topic。")])]),t._v(" "),a("tr",[a("td",[t._v("$aws/things/thingName/shadow/update/documents")]),t._v(" "),a("td",[t._v("Subscribe")]),t._v(" "),a("td",[t._v("每次影子更新成功执行时，AWS IoT 都会向该主题发布状态文档。有关更多信息，请参阅 http://docs.aws.amazon.com/iot/latest/developerguide//device-shadow-mqtt.html#update-documents-pub-sub-topic。")])])])])])}],!1,null,null,null);e.options.__file="shadow.md";s.default=e.exports}}]);