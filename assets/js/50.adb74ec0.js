(window.webpackJsonp=window.webpackJsonp||[]).push([[50],{308:function(a,s,n){"use strict";n.r(s);var t=n(0),e=Object(t.a)({},function(){this.$createElement;this._self._c;return this._m(0)},[function(){var a=this,s=a.$createElement,n=a._self._c||s;return n("div",{staticClass:"content"},[n("h1",{attrs:{id:"internationalization-make-an-flutter-application-multi-lingual"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#internationalization-make-an-flutter-application-multi-lingual","aria-hidden":"true"}},[a._v("#")]),a._v(" Internationalization - Make an Flutter application multi-lingual")]),a._v(" "),n("p",[a._v("forward from: https://www.didierboelens.com/2018/04/internationalization---make-an-flutter-application-multi-lingual/")]),a._v(" "),n("p",[a._v("This article explains a way to make your Flutter application multilingual and to allow the user to select another working language, other than the one, defined at the Smartphone’s settings.")]),a._v(" "),n("h2",{attrs:{id:"forewords"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#forewords","aria-hidden":"true"}},[a._v("#")]),a._v(" Forewords")]),a._v(" "),n("p",[a._v("Internationalization has already been explained several times and the Flutter official documentation on this topic may be found here.")]),a._v(" "),n("p",[a._v("As I wanted to understand it correctly but also, because I needed to extend it to meet my application’s requirements, I decided to write the following article to share my experience and give you some hints.")]),a._v(" "),n("h2",{attrs:{id:"requirements"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#requirements","aria-hidden":"true"}},[a._v("#")]),a._v(" Requirements")]),a._v(" "),n("ul",[n("li",[a._v("By default, the working language should be the one configured in the Smartphone (system settings)")]),a._v(" "),n("li",[a._v("If the default language is not supported by the application, ‘en’ becomes the default")]),a._v(" "),n("li",[a._v("Translations are stored in language specific JSON files, as assets")]),a._v(" "),n("li",[a._v("The user may select another working language, from a list of supported languages")]),a._v(" "),n("li",[a._v("When the user selects another language, the whole application layout is refreshed in order to be displayed in the newly selected language")])]),a._v(" "),n("h2",{attrs:{id:"external-dependencies"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#external-dependencies","aria-hidden":"true"}},[a._v("#")]),a._v(" External dependencies")]),a._v(" "),n("p",[a._v("Flutter natively supports localization (notion of Locale). The Locale class is used to identity the user’s language. One of the properties of this class defines the languageCode.")]),a._v(" "),n("p",[a._v("To use the localization package, you will need to use the flutter_localizations package. To do so, you will have to add it as a dependency to your pubspec.yaml file as follows:")]),a._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{attrs:{class:"token key atrule"}},[a._v("dependencies")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),n("span",{attrs:{class:"token key atrule"}},[a._v("flutter")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),n("span",{attrs:{class:"token key atrule"}},[a._v("sdk")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" flutter\n  "),n("span",{attrs:{class:"token key atrule"}},[a._v("flutter_localizations")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),n("span",{attrs:{class:"token key atrule"}},[a._v("sdk")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" flutter\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br")])]),n("p",[a._v("When saving the pubspec.yaml, you will be prompted to load/import the dependencies: accept and load/import them.")]),a._v(" "),n("h2",{attrs:{id:"translation-files"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#translation-files","aria-hidden":"true"}},[a._v("#")]),a._v(" Translation files")]),a._v(" "),n("p",[a._v("The next step is to create the translations files and define them as assets.")]),a._v(" "),n("p",[a._v("From my past experience developing websites, I used to store these assets in a folder called “/locale”, under the naming convention: i18n_{lang}.json. I will use the same principle in this article.")]),a._v(" "),n("p",[a._v("Therefore, create a new folder at the same level as the /lib and call it “/locale”. In this folder, create 2 files, respectively named: i18n_en.json and i18n_fr.json.")]),a._v(" "),n("p",[a._v("The folders tree should then look like the following:")]),a._v(" "),n("p",[a._v("MyApplication\n|\n+- android\n+- build\n+- images\n+- ios\n+- lib\n+- locale\n|\n+- i18n_en.json\n+- i18n_fr.json\n+- test")]),a._v(" "),n("p",[a._v("Now, we need to make these 2 files, part of the assets.")]),a._v(" "),n("p",[a._v("In order to do this, you will have to edit the pubspec.yaml file and add then both to the assets: section, as follows:")]),a._v(" "),n("div",{staticClass:"language-yaml line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-yaml"}},[n("code",[n("span",{attrs:{class:"token key atrule"}},[a._v("dependencies")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),n("span",{attrs:{class:"token key atrule"}},[a._v("flutter")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),n("span",{attrs:{class:"token key atrule"}},[a._v("sdk")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" flutter\n  "),n("span",{attrs:{class:"token key atrule"}},[a._v("flutter_localizations")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),n("span",{attrs:{class:"token key atrule"}},[a._v("sdk")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" flutter\n\n"),n("span",{attrs:{class:"token key atrule"}},[a._v("flutter")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n  "),n("span",{attrs:{class:"token key atrule"}},[a._v("assets")]),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v("\n    "),n("span",{attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" locale/i18n_en.json\n    "),n("span",{attrs:{class:"token punctuation"}},[a._v("-")]),a._v(" locale/i18n_fr.json\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br")])]),n("h2",{attrs:{id:"implementation"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#implementation","aria-hidden":"true"}},[a._v("#")]),a._v(" Implementation")]),a._v(" "),n("p",[a._v("It is now time to start with the implementation…")]),a._v(" "),n("p",[a._v("Let’s start at the beginning, the application’s main initialization: main.dart")]),a._v(" "),n("div",{staticClass:"language-dart line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-dart"}},[n("code",[n("span",{attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),n("span",{attrs:{class:"token string"}},[a._v("'package:flutter/material.dart'")]),n("span",{attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),n("span",{attrs:{class:"token string"}},[a._v("'package:flutter_localizations/flutter_localizations.dart'")]),n("span",{attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n"),n("span",{attrs:{class:"token keyword"}},[a._v("import")]),a._v(" "),n("span",{attrs:{class:"token string"}},[a._v("'translations.dart'")]),n("span",{attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[a._v("void")]),a._v(" "),n("span",{attrs:{class:"token function"}},[a._v("main")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{attrs:{class:"token operator"}},[a._v("=")]),n("span",{attrs:{class:"token operator"}},[a._v(">")]),a._v(" "),n("span",{attrs:{class:"token function"}},[a._v("runApp")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("MyApp")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n\n"),n("span",{attrs:{class:"token keyword"}},[a._v("class")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("MyApp")]),a._v(" "),n("span",{attrs:{class:"token keyword"}},[a._v("extends")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("StatelessWidget")]),a._v(" "),n("span",{attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n  "),n("span",{attrs:{class:"token comment"}},[a._v("// This widget is the root of your application.")]),a._v("\n  "),n("span",{attrs:{class:"token metadata symbol"}},[a._v("@override")]),a._v("\n  Widget "),n("span",{attrs:{class:"token function"}},[a._v("build")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),a._v("BuildContext context"),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),a._v(" "),n("span",{attrs:{class:"token punctuation"}},[a._v("{")]),a._v("\n    "),n("span",{attrs:{class:"token keyword"}},[a._v("return")]),a._v(" "),n("span",{attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("MaterialApp")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n      title"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),n("span",{attrs:{class:"token string"}},[a._v("'My Application'")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      theme"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),n("span",{attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("ThemeData")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n        primarySwatch"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" Colors"),n("span",{attrs:{class:"token punctuation"}},[a._v(".")]),a._v("blue"),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      localizationsDelegates"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),n("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n        "),n("span",{attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{attrs:{class:"token function"}},[a._v("TranslationsDelegate")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        GlobalMaterialLocalizations"),n("span",{attrs:{class:"token punctuation"}},[a._v(".")]),a._v("delegate"),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n        GlobalWidgetsLocalizations"),n("span",{attrs:{class:"token punctuation"}},[a._v(".")]),a._v("delegate"),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      supportedLocales"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),n("span",{attrs:{class:"token punctuation"}},[a._v("[")]),a._v("\n          "),n("span",{attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{attrs:{class:"token function"}},[a._v("Locale")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{attrs:{class:"token string"}},[a._v("'en'")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{attrs:{class:"token string"}},[a._v("''")]),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n          "),n("span",{attrs:{class:"token keyword"}},[a._v("const")]),a._v(" "),n("span",{attrs:{class:"token function"}},[a._v("Locale")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{attrs:{class:"token string"}},[a._v("'fr'")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v(" "),n("span",{attrs:{class:"token string"}},[a._v("''")]),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[a._v("]")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      home"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),n("span",{attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("Scaffold")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n          appBar"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),n("span",{attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("AppBar")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n            title"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),n("span",{attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("Text")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),n("span",{attrs:{class:"token string"}},[a._v("'My Title'")]),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n          body"),n("span",{attrs:{class:"token punctuation"}},[a._v(":")]),a._v(" "),n("span",{attrs:{class:"token keyword"}},[a._v("new")]),a._v(" "),n("span",{attrs:{class:"token class-name"}},[a._v("Container")]),n("span",{attrs:{class:"token punctuation"}},[a._v("(")]),a._v("\n          "),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("\n      "),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(",")]),a._v("        \n    "),n("span",{attrs:{class:"token punctuation"}},[a._v(")")]),n("span",{attrs:{class:"token punctuation"}},[a._v(";")]),a._v("\n  "),n("span",{attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n"),n("span",{attrs:{class:"token punctuation"}},[a._v("}")]),a._v("\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br")])]),n("ul",[n("li",[a._v("Line #2: simply imports the flutter localizations package")]),a._v(" "),n("li",[a._v("Line #3: imports the personal library that handles the translations (see later)")]),a._v(" "),n("li",[a._v("Lines #16-20: are factories that produce collections of localized values.\n"),n("ul",[n("li",[a._v("GlobalMaterialLocalizations.delegate provides localized strings and other values for the Material Components library.")]),a._v(" "),n("li",[a._v("GlobalWidgetsLocalizations.delegate defines the default text direction, either left to right or right to left, for the widgets library")]),a._v(" "),n("li",[a._v("const TranslationsDelegate() points to the personal library to handle the translations (see later)")])])]),a._v(" "),n("li",[a._v("Lines #21-24: list of the supported languages")])]),a._v(" "),n("p",[a._v("Let’s now have a look at the personal library that handles the translations: translations.dart.")]),a._v(" "),n("p",[a._v("Under /lib, create a new file, named “translations.dart”.")]),a._v(" "),n("p",[a._v("The initial content of the translations.dart file is:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("import 'dart:async';\nimport 'dart:convert';\nimport 'package:flutter/material.dart';\nimport 'package:flutter/services.dart' show  rootBundle;\n\nclass Translations {\n  Translations(Locale locale) {\n    this.locale = locale;\n    _localizedValues = null;\n  }\n\n  Locale locale;\n  static Map<dynamic, dynamic> _localizedValues;\n\n  static Translations of(BuildContext context){\n    return Localizations.of<Translations>(context, Translations);\n  }\n\n  String text(String key) {\n    return _localizedValues[key] ?? '** $key not found';\n  }\n\n  static Future<Translations> load(Locale locale) async {\n    Translations translations = new Translations(locale);\n    String jsonContent = await rootBundle.loadString(\"locale/i18n_${locale.languageCode}.json\");\n    _localizedValues = json.decode(jsonContent);\n    return translations;\n  }\n\n  get currentLanguage => locale.languageCode;\n}\n\nclass TranslationsDelegate extends LocalizationsDelegate<Translations> {\n  const TranslationsDelegate();\n\n  @override\n  bool isSupported(Locale locale) => ['en','fr'].contains(locale.languageCode);\n\n  @override\n  Future<Translations> load(Locale locale) => Translations.load(locale);\n\n  @override\n  bool shouldReload(TranslationsDelegate old) => false;\n}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br"),n("span",{staticClass:"line-number"},[a._v("35")]),n("br"),n("span",{staticClass:"line-number"},[a._v("36")]),n("br"),n("span",{staticClass:"line-number"},[a._v("37")]),n("br"),n("span",{staticClass:"line-number"},[a._v("38")]),n("br"),n("span",{staticClass:"line-number"},[a._v("39")]),n("br"),n("span",{staticClass:"line-number"},[a._v("40")]),n("br"),n("span",{staticClass:"line-number"},[a._v("41")]),n("br"),n("span",{staticClass:"line-number"},[a._v("42")]),n("br"),n("span",{staticClass:"line-number"},[a._v("43")]),n("br"),n("span",{staticClass:"line-number"},[a._v("44")]),n("br")])]),n("ul",[n("li",[a._v("Lines #33-44: definition of the personal localization delegate. Its role is to instantiate our personal Translations class (line 40), proceeding with validation of supported languages (line 37).")]),a._v(" "),n("li",[a._v("Lines #6-31: definition of the personal Translations class.")])]),a._v(" "),n("h2",{attrs:{id:"explanation-of-the-translations-class"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#explanation-of-the-translations-class","aria-hidden":"true"}},[a._v("#")]),a._v(" Explanation of the Translations class")]),a._v(" "),n("p",[a._v("The main objectives of this class are:")]),a._v(" "),n("ul",[n("li",[a._v("when instantiated by the TranslationsDelegate class, the class receives the Locale to be used for the translations. At first instantiation, the Locale which is passed as argument to the constructor of the class corresponds to the Smartphone Locale as defined in the Settings.")]),a._v(" "),n("li",[a._v("the constructor simply memorizes this Locale and resets the Map that is going to hold the translations in that Locale.languageCode")]),a._v(" "),n("li",[a._v("the load method when called by the TranslationsDelegate class, initializes a new instance of the Translations class, loads the content of the i18n_{language}.json file and converts the JSON to a Map. It then returns the new instance of the class.")]),a._v(" "),n("li",[a._v("method Translations of(BuildContext context) is used to return a pointer to this instance of the class. This is will used when we will need to get the translations of a certain string/label (see later)")]),a._v(" "),n("li",[a._v("text(String key) will be used to return the translation of a certain string/label, based on the content of the Map (see later).")]),a._v(" "),n("li",[a._v("currentLanguage is a getter to return the language, currently being used.")])]),a._v(" "),n("h2",{attrs:{id:"how-to-structure-the-i18n-language-json-files"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#how-to-structure-the-i18n-language-json-files","aria-hidden":"true"}},[a._v("#")]),a._v(" How to structure the i18n_{language}.json files?")]),a._v(" "),n("p",[a._v("These files are JSON files, which have to stick to the JSON syntax rules.")]),a._v(" "),n("p",[a._v("These files will contain a series of key/value pairs, as in the following example (i18n_en.json):")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('{\n    "app_title": "My Application Title",\n    "main_title": "My Main Title"\n}\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("p",[a._v("Warning!: unlike Dart/Flutter good practice, JSON syntax does not accept trailing comma’s!")]),a._v(" "),n("p",[a._v("It is now up to you to fill both i18n_en.json and i18n_fr.json files with the key/value pairs.")]),a._v(" "),n("p",[a._v("For this example, the counter part in French would be (i18n_fr.json):")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v('{\n    "app_title": "Le titre de mon application",\n    "main_title": "Mon titre principal"\n}\n')])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br")])]),n("h2",{attrs:{id:"how-to-get-the-translations"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#how-to-get-the-translations","aria-hidden":"true"}},[a._v("#")]),a._v(" How to get the translations?")]),a._v(" "),n("p",[a._v("To get the translation of a certain label/string, pass the context and the label you want to be translated as follows:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("@override\n  Widget build(BuildContext context) {\n    return new Scaffold(\n      appBar: new AppBar(\n        title: new Text(Translations.of(context).text('main_title')),\n    ...\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br")])]),n("h2",{attrs:{id:"how-to-dynamically-change-the-working-language"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#how-to-dynamically-change-the-working-language","aria-hidden":"true"}},[a._v("#")]),a._v(" How to dynamically change the working language?")]),a._v(" "),n("p",[a._v("OK, now that we know how to define the languages, the translations and use the translations, how can we let the user change the working language?")]),a._v(" "),n("p",[a._v("In order to do this, we need to way to force the refresh of the whole application layout when the user selects another working language. Therefore, we need to application to handle a setState().")]),a._v(" "),n("p",[a._v("Before going any further, let’s refactor the code and let’s create a new file, called application.dart.")]),a._v(" "),n("p",[a._v("This file will be used for 2 purposes:")]),a._v(" "),n("ul",[n("li",[a._v("repository of application settings")]),a._v(" "),n("li",[a._v("share globals")])]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("typedef void LocaleChangeCallback(Locale locale);\nclass APPLIC {\n    // List of supported languages\n    final List<String> supportedLanguages = ['en','fr'];\n\n    // Returns the list of supported Locales\n    Iterable<Locale> supportedLocales() => supportedLanguages.map<Locale>((lang) => new Locale(lang, ''));\n\n    // Function to be invoked when changing the working language\n    LocaleChangeCallback onLocaleChanged;\n\n    ///\n    /// Internals\n    ///\n    static final APPLIC _applic = new APPLIC._internal();\n\n    factory APPLIC(){\n        return _applic;\n    }\n\n    APPLIC._internal();\n}\n\nAPPLIC applic = new APPLIC();\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br")])]),n("p",[a._v("This is a self-initializing class. Each time it will be imported in the source code, the very same instance of the class will be returned.")]),a._v(" "),n("p",[a._v("Let’s now make the application “refreshable”…")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("import 'package:flutter/material.dart';\nimport 'package:flutter_localizations/flutter_localizations.dart';\nimport 'translations.dart';\nimport 'application.dart';\n\nvoid main() => runApp(new MyApp());\n\nclass MyApp extends StatefulWidget {\n  @override\n  _MyAppState createState() => new _MyAppState();\n}\n\nclass _MyAppState extends State<MyApp> {\n  SpecificLocalizationDelegate _localeOverrideDelegate;\n\n  @override\n  void initState(){\n    super.initState();\n    _localeOverrideDelegate = new SpecificLocalizationDelegate(null);\n    ///\n    /// Let's save a pointer to this method, should the user wants to change its language\n    /// We would then call: applic.onLocaleChanged(new Locale('en',''));\n    /// \n    applic.onLocaleChanged = onLocaleChange;\n  }\n\n  onLocaleChange(Locale locale){\n    setState((){\n      _localeOverrideDelegate = new SpecificLocalizationDelegate(locale);\n    });\n  }\n\n  // This widget is the root of your application.\n  @override\n  Widget build(BuildContext context) {\n    return new MaterialApp(\n      title: 'My Application',\n      theme: new ThemeData(\n        primarySwatch: Colors.blue,\n      ),\n      localizationsDelegates: [\n        _localeOverrideDelegate,\n        const TranslationsDelegate(),\n        GlobalMaterialLocalizations.delegate,\n        GlobalWidgetsLocalizations.delegate,\n      ],\n      supportedLocales: applic.supportedLocales(),\n      home: new MyHomePage(),\n    );\n  }\n}\n\nclass MyHomePage extends StatefulWidget {\n  _MyHomePageState createState() => new _MyHomePageState();\n}\n\nclass _MyHomePageState extends State<MyHomePage>{\n  @override\n  Widget build(BuildContext context){\n    return new Scaffold(\n      appBar: new AppBar(\n        title: new Text(Translations.of(context).text('main_title')),\n      ),\n      body: new Container(),\n    );\n  }\n}\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br"),n("span",{staticClass:"line-number"},[a._v("35")]),n("br"),n("span",{staticClass:"line-number"},[a._v("36")]),n("br"),n("span",{staticClass:"line-number"},[a._v("37")]),n("br"),n("span",{staticClass:"line-number"},[a._v("38")]),n("br"),n("span",{staticClass:"line-number"},[a._v("39")]),n("br"),n("span",{staticClass:"line-number"},[a._v("40")]),n("br"),n("span",{staticClass:"line-number"},[a._v("41")]),n("br"),n("span",{staticClass:"line-number"},[a._v("42")]),n("br"),n("span",{staticClass:"line-number"},[a._v("43")]),n("br"),n("span",{staticClass:"line-number"},[a._v("44")]),n("br"),n("span",{staticClass:"line-number"},[a._v("45")]),n("br"),n("span",{staticClass:"line-number"},[a._v("46")]),n("br"),n("span",{staticClass:"line-number"},[a._v("47")]),n("br"),n("span",{staticClass:"line-number"},[a._v("48")]),n("br"),n("span",{staticClass:"line-number"},[a._v("49")]),n("br"),n("span",{staticClass:"line-number"},[a._v("50")]),n("br"),n("span",{staticClass:"line-number"},[a._v("51")]),n("br"),n("span",{staticClass:"line-number"},[a._v("52")]),n("br"),n("span",{staticClass:"line-number"},[a._v("53")]),n("br"),n("span",{staticClass:"line-number"},[a._v("54")]),n("br"),n("span",{staticClass:"line-number"},[a._v("55")]),n("br"),n("span",{staticClass:"line-number"},[a._v("56")]),n("br"),n("span",{staticClass:"line-number"},[a._v("57")]),n("br"),n("span",{staticClass:"line-number"},[a._v("58")]),n("br"),n("span",{staticClass:"line-number"},[a._v("59")]),n("br"),n("span",{staticClass:"line-number"},[a._v("60")]),n("br"),n("span",{staticClass:"line-number"},[a._v("61")]),n("br"),n("span",{staticClass:"line-number"},[a._v("62")]),n("br"),n("span",{staticClass:"line-number"},[a._v("63")]),n("br"),n("span",{staticClass:"line-number"},[a._v("64")]),n("br"),n("span",{staticClass:"line-number"},[a._v("65")]),n("br"),n("span",{staticClass:"line-number"},[a._v("66")]),n("br"),n("span",{staticClass:"line-number"},[a._v("67")]),n("br")])]),n("ul",[n("li",[a._v("Lines #8-13: The first modification to apply is to make the application Stateful. This will allow us to respond to a request for refresh and invoke the application SetState().")]),a._v(" "),n("li",[a._v("Line #19: we need to instantiate a new Localization Delegate, which will be used to force a new instantiation of the Translations class when the user will select another working language.")]),a._v(" "),n("li",[a._v("Line #24: we save in the Global APPLIC class a pointer to a method which will be used to force a full application refresh, via the SetState()")]),a._v(" "),n("li",[a._v("Lines #27-31: the heart of the application refresh when we change the language. Each time another language is selected, a new instance of the SpecificLocalizationDelegate is created, which, we will see just after, will force a refresh of the Translations class.")]),a._v(" "),n("li",[a._v("Line #42: we register the new delegate")]),a._v(" "),n("li",[a._v("Line #47: refactoring. Now that we have a Global APPLIC class to hold the settings, let’s use it.")]),a._v(" "),n("li",[a._v("Line #62: let’s take the opportunity to use the translations library.")])]),a._v(" "),n("p",[a._v("Now we need to apply some changes to the Translations.dart file… (final version)")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("import 'dart:async';\nimport 'dart:convert';\nimport 'package:flutter/material.dart';\nimport 'package:flutter/services.dart' show  rootBundle;\nimport 'application.dart';\n\nclass Translations {\n  Translations(Locale locale) {\n    this.locale = locale;\n    _localizedValues = null;\n  }\n\n  Locale locale;\n  static Map<dynamic, dynamic> _localizedValues;\n\n  static Translations of(BuildContext context){\n    return Localizations.of<Translations>(context, Translations);\n  }\n\n  String text(String key) {\n    return _localizedValues[key] ?? '** $key not found';\n  }\n\n  static Future<Translations> load(Locale locale) async {\n    Translations translations = new Translations(locale);\n    String jsonContent = await rootBundle.loadString(\"locale/i18n_${locale.languageCode}.json\");\n    _localizedValues = json.decode(jsonContent);\n    return translations;\n  }\n\n  get currentLanguage => locale.languageCode;\n}\n\nclass TranslationsDelegate extends LocalizationsDelegate<Translations> {\n  const TranslationsDelegate();\n\n  @override\n  bool isSupported(Locale locale) => applic.supportedLanguages.contains(locale.languageCode);\n\n  @override\n  Future<Translations> load(Locale locale) => Translations.load(locale);\n\n  @override\n  bool shouldReload(TranslationsDelegate old) => false;\n}\n\nclass SpecificLocalizationDelegate extends LocalizationsDelegate<Translations> {\n  final Locale overriddenLocale;\n\n  const SpecificLocalizationDelegate(this.overriddenLocale);\n\n  @override\n  bool isSupported(Locale locale) => overriddenLocale != null;\n\n  @override\n  Future<Translations> load(Locale locale) => Translations.load(overriddenLocale);\n\n  @override\n  bool shouldReload(LocalizationsDelegate<Translations> old) => true;\n}\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br"),n("span",{staticClass:"line-number"},[a._v("3")]),n("br"),n("span",{staticClass:"line-number"},[a._v("4")]),n("br"),n("span",{staticClass:"line-number"},[a._v("5")]),n("br"),n("span",{staticClass:"line-number"},[a._v("6")]),n("br"),n("span",{staticClass:"line-number"},[a._v("7")]),n("br"),n("span",{staticClass:"line-number"},[a._v("8")]),n("br"),n("span",{staticClass:"line-number"},[a._v("9")]),n("br"),n("span",{staticClass:"line-number"},[a._v("10")]),n("br"),n("span",{staticClass:"line-number"},[a._v("11")]),n("br"),n("span",{staticClass:"line-number"},[a._v("12")]),n("br"),n("span",{staticClass:"line-number"},[a._v("13")]),n("br"),n("span",{staticClass:"line-number"},[a._v("14")]),n("br"),n("span",{staticClass:"line-number"},[a._v("15")]),n("br"),n("span",{staticClass:"line-number"},[a._v("16")]),n("br"),n("span",{staticClass:"line-number"},[a._v("17")]),n("br"),n("span",{staticClass:"line-number"},[a._v("18")]),n("br"),n("span",{staticClass:"line-number"},[a._v("19")]),n("br"),n("span",{staticClass:"line-number"},[a._v("20")]),n("br"),n("span",{staticClass:"line-number"},[a._v("21")]),n("br"),n("span",{staticClass:"line-number"},[a._v("22")]),n("br"),n("span",{staticClass:"line-number"},[a._v("23")]),n("br"),n("span",{staticClass:"line-number"},[a._v("24")]),n("br"),n("span",{staticClass:"line-number"},[a._v("25")]),n("br"),n("span",{staticClass:"line-number"},[a._v("26")]),n("br"),n("span",{staticClass:"line-number"},[a._v("27")]),n("br"),n("span",{staticClass:"line-number"},[a._v("28")]),n("br"),n("span",{staticClass:"line-number"},[a._v("29")]),n("br"),n("span",{staticClass:"line-number"},[a._v("30")]),n("br"),n("span",{staticClass:"line-number"},[a._v("31")]),n("br"),n("span",{staticClass:"line-number"},[a._v("32")]),n("br"),n("span",{staticClass:"line-number"},[a._v("33")]),n("br"),n("span",{staticClass:"line-number"},[a._v("34")]),n("br"),n("span",{staticClass:"line-number"},[a._v("35")]),n("br"),n("span",{staticClass:"line-number"},[a._v("36")]),n("br"),n("span",{staticClass:"line-number"},[a._v("37")]),n("br"),n("span",{staticClass:"line-number"},[a._v("38")]),n("br"),n("span",{staticClass:"line-number"},[a._v("39")]),n("br"),n("span",{staticClass:"line-number"},[a._v("40")]),n("br"),n("span",{staticClass:"line-number"},[a._v("41")]),n("br"),n("span",{staticClass:"line-number"},[a._v("42")]),n("br"),n("span",{staticClass:"line-number"},[a._v("43")]),n("br"),n("span",{staticClass:"line-number"},[a._v("44")]),n("br"),n("span",{staticClass:"line-number"},[a._v("45")]),n("br"),n("span",{staticClass:"line-number"},[a._v("46")]),n("br"),n("span",{staticClass:"line-number"},[a._v("47")]),n("br"),n("span",{staticClass:"line-number"},[a._v("48")]),n("br"),n("span",{staticClass:"line-number"},[a._v("49")]),n("br"),n("span",{staticClass:"line-number"},[a._v("50")]),n("br"),n("span",{staticClass:"line-number"},[a._v("51")]),n("br"),n("span",{staticClass:"line-number"},[a._v("52")]),n("br"),n("span",{staticClass:"line-number"},[a._v("53")]),n("br"),n("span",{staticClass:"line-number"},[a._v("54")]),n("br"),n("span",{staticClass:"line-number"},[a._v("55")]),n("br"),n("span",{staticClass:"line-number"},[a._v("56")]),n("br"),n("span",{staticClass:"line-number"},[a._v("57")]),n("br"),n("span",{staticClass:"line-number"},[a._v("58")]),n("br"),n("span",{staticClass:"line-number"},[a._v("59")]),n("br"),n("span",{staticClass:"line-number"},[a._v("60")]),n("br"),n("span",{staticClass:"line-number"},[a._v("61")]),n("br")])]),n("ul",[n("li",[a._v("Line #38: refactoring in order not to hardcode the supported languages")]),a._v(" "),n("li",[a._v("Lines #47-60: the implementation of the Delegate, which forces a new instantiation of the Translations class each time a new language is selected.")])]),a._v(" "),n("p",[a._v("How to apply a change of working language?\nHere is the cherry on the cake!")]),a._v(" "),n("p",[a._v("To force another working language, one single line of code is necessary, anywhere in the source code of the application:")]),a._v(" "),n("div",{staticClass:"language- line-numbers-mode"},[n("pre",{pre:!0,attrs:{class:"language-text"}},[n("code",[a._v("applic.onLocaleChanged(new Locale('fr',''));\n\n")])]),a._v(" "),n("div",{staticClass:"line-numbers-wrapper"},[n("span",{staticClass:"line-number"},[a._v("1")]),n("br"),n("span",{staticClass:"line-number"},[a._v("2")]),n("br")])]),n("p",[a._v("Thanks to the Global applic instance, we can make a call to the Main application method onLocaleChange(Locale locale), which will create a new instance of the Delegate, which in turn will force a new instance of the Translations class, with the new language.")]),a._v(" "),n("p",[a._v("The whole application will then be refreshed.")]),a._v(" "),n("h2",{attrs:{id:"conclusions"}},[n("a",{staticClass:"header-anchor",attrs:{href:"#conclusions","aria-hidden":"true"}},[a._v("#")]),a._v(" Conclusions")]),a._v(" "),n("p",[a._v("I am sure other solutions exist, maybe with better code.")]),a._v(" "),n("p",[a._v("The sole objective of this article is to share a solution that works for me, which I hope could also help others.")]),a._v(" "),n("p",[a._v("In a next article, I will detail a dedicated Widget to select working languages, which will complement this article.")]),a._v(" "),n("p",[a._v("Stay tuned and happy coding.")])])}],!1,null,null,null);e.options.__file="i18n.md";s.default=e.exports}}]);